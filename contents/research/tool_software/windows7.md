---
title: "Windows7の仮想化
date: "2025-04-05"
---

# Windows7の仮想化
ここでは、実機でWindows7が動いている状態から、その状態を仮想化してWindows11上で動かす方法を説明します。

# 手順

## Disk2vhdを使用したvhdファイルの作成
- Windows7の実機を起動し、Disk2vhdをダウンロードして実行します。
- Disk2vhdを実行すると、仮想化したいドライブを選択する画面が表示されます。ここでは、Cドライブとbootドライブを選択します。
    - 基本的に一番上から3つめまで
- 保存ファイルがvhdになることを確認し、保存先を指定して「Create」をクリックします。
- しばらく待つと、vhdファイルが作成されます。

## ホストOS (Windows11)での設定

- VirtualBoxをインストールします。
    - 現在 (2024年4月15日)では最新バージョン (7.1.6) だとエラーが出るため、7.1.4をインストールします。
- VirtualBoxを起動し、「新規」をクリックします。
- 名前を適当に設定し、タイプは「Microsoft Windows」、バージョンは「Windows 7 (64-bit)」を選択します。
- メモリサイズは4096MBを選択します。
- 「完了」をクリックします。
- 「設定」をクリックして、ビデオメモリを128MBに設定します。
    - また、「ストレージ」タブを選択し、右下のアイコンの中から「コントローラーを追加」を選択し、「PIIX4 (デフォルトIDE)」を選択します。
    - ここで追加されたコントローラーに対して、上記のvhdファイルを追加します。
- これで起動します

## 起動後の設定

- 起動後、ドライバのインストールが必要です。画面上の「デバイス」->「Get Additions CD Image」を選択します。
- これでドライバのインストールが始まります。
    - インストールが始まらない場合は、手動で「コンピュータ」->「CDドライブ」を開き、setup.exeを実行します。
- インストールが完了したら、再起動します。
- 再起動後、画面の解像度が変更されていることを確認します。
    - 解像度が変更できない場合には、「表示」->「仮想スクリーン1」->「1920x1080」を選択します。
